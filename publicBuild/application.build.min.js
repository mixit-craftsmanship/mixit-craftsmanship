define("viewModels/main",["knockout"],function(e){var t=function(){var t=this;t.currentPage=e.observable(),t.changePage=function(e){var n=t.currentPage();t.currentPage(e),n&&n.dispose&&n.dispose()}};return{create:function(){return new t}}}),define("libs/api",["jquery"],function(e){return{currentTalks:function(){return e.get("/api/talks/current")},nextTalks:function(){return e.get("/api/talks/next")},getTalk:function(t){return e.get("/api/talks/"+t)},applicationVersion:function(){return e.get("/api/applicationVersion")},getStatistiques:function(){return e.get("/api/stats")}}}),define("viewModels/home",["knockout","libs/api"],function(e,t){var n=function(e,t,n){var i=this;i.id=e,i.title=t,i.select=function(){n.displayTalkVotePage(e,t)},i.viewDetails=function(){n.displayTalkDetail(e,t)}},i=function(i){var o=this;o.templateName="homeTemplate",o.talks=e.observableArray(),o.nextTalks=e.observableArray(),o.waiting=e.observable(!0),o.isThereNextTalks=e.computed(function(){return o.nextTalks().length>0}),t.currentTalks().done(function(t){var a=e.utils.arrayMap(t,function(e){return new n(e.id,e.title,i)});o.talks(a),o.waiting(!1)}),t.nextTalks().done(function(t){var a=e.utils.arrayMap(t,function(e){return new n(e.id,e.title,i)});o.nextTalks(a)}),o.displayStatistique=function(){i.displayStatistiquePage()},window.twttr&&window.setTimeout(function(){window.twttr.widgets.load()},0)};return{create:function(e){return new i(e)}}}),define("viewModels/about",["libs/api","knockout"],function(e,t){var n=function(){var n=this;n.templateName="aboutTemplate",n.applicationVersion=t.observable("non déterminée"),e.applicationVersion().done(function(e){n.applicationVersion(e.applicationVersion)})};return{create:function(){return new n}}}),define("libs/timer",[],function(){var e=function(e,t){var n,i=this;i.start=function(){void 0===n&&(n=setInterval(t,e))},i.stop=function(){void 0!==n&&(clearInterval(n),n=void 0)},i.restart=function(){i.stop(),i.start()}};return{create:function(t,n){return new e(t,n)}}}),define("libs/socketIO",["socketIO","jquery","libs/timer"],function(e,t,n){var i,o=50,a=function(){return void 0===i?!1:i.socket.open},r=function(){var e=new t.Deferred,i=0,r=function(){return a()?(s.stop(),void e.resolve(!0)):i>o?(s.stop(),void e.reject("Impossible to connect")):void i++},s=n.create(100,r);return s.start(),e.promise()};return{connect:function(){return a()?void 0:(i?i.socket.connect():i=e.connect(),r())},disconnect:function(){a()&&i.disconnect()},send:function(e,t){if(!a())throw"Impossible to connect at server";i.emit(e,t)},on:function(e,t){i.on(e,t)},isConnected:function(){return a()},dispose:function(){i=void 0}}}),define("libs/voteSender",["libs/timer","libs/socketIO"],function(e,t){var n,i=[],o=function(){return void 0===n&&(n=e.create(1e3,a)),n},a=function(){o().stop();var e=i;i=[];for(var n in e)t.send("vote",{talkId:n,votesNb:e[n]})};return{isEnabled:function(){return t.isConnected()},enable:function(){return t.connect()},disable:function(){t.disconnect(),o().stop(),i=[]},send:function(e){void 0===i[e]?i[e]=1:i[e]++,o().start()},onTalkEnded:function(e){t.on("InvalidTalk",e)}}}),define("viewModels/talkVote",["knockout","libs/timer","libs/voteSender","libs/api"],function(e,t,n,i){var o=function(o,a){var r=this;r.templateName="talkVoteTemplate",r.talkId=o,r.talkTitle=a,r.hasError=e.observable(!1),r.connected=e.observable(!1),r.talkEnded=e.observable(!1),r.happyLevel=e.observable(0),r.talkRoom=e.observable(),i.getTalk(o).done(function(e){r.talkRoom(e.room)});var s=0,c=function(){r.happyLevel(s>8?5:s>6?4:s>4?3:s>1?2:1==s?1:0),s=Math.floor(s/2)},u=t.create(500,c);r.vote=function(){return n.isEnabled()?(0>=s&&(u.restart(),r.happyLevel(1)),s++,void n.send(o)):void r.hasError(!0)},n.enable().done(function(){r.connected(!0)}).fail(function(){r.hasError(!0)}),n.onTalkEnded(function(){r.talkEnded(!0)}),r.dispose=function(){u.stop(),n.disable()},window.twttr&&window.setTimeout(function(){window.twttr.widgets.load()},0)};return{create:function(e,t){return new o(e,t)}}}),define("libs/chartBinding",["knockout","jquery","globalize","chart"],function(e){e.bindingHandlers.chartMixIt={update:function(t,n){var i=n(),o=e.unwrap(i);$(t).dxChart(o)}}}),define("viewModels/statistique",["knockout","libs/api","libs/chartBinding"],function(e,t){var n=function(){var n=this;n.templateName="statistiqueTemplate";var i={commonSeriesSettings:{type:"stackedArea",argumentField:"date"},title:"Votes",argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!0}},tooltip:{enabled:!0},legend:{visible:!1}};n.chartOptions=e.observable(),t.getStatistiques().done(function(e){i.dataSource=e.dataSource.map(function(e){return e.date=new Date(e.date),e}),i.series=e.series.map(function(e){return{valueField:e.id,name:e.name}}),n.chartOptions(i)})};return{create:function(){return new n}}}),define("libs/navigation",["sammy","viewModels/home","viewModels/about","viewModels/talkVote","viewModels/statistique"],function(e,t,n,i,o){var a="#/",r="#/about",s="#/talkVote/",c="#/statistique/",u="#/talkDetail/",l=function(l,d){return e(function(){this.get(a,function(){l(t.create(d))}),this.get(r,function(){l(n.create())}),this.get(s+":talkId/:talkTitle",function(){var e=this.params;l(i.create(e.talkId,e.talkTitle))}),this.get(u+":talkId/:talkTitle",function(){var e=this.params;l(talkDetailViewModel.create(e.talkId,e.talkTitle))}),this.get(c,function(){this.params;l(o.create())})})},d=function(e){window.location.hash=e},f=function(){var e,t=this;t.initialize=function(n){void 0!==e&&e.unload(),e=l(n,t),e.run(a)},t.displayHomePage=function(){d(a)},t.displayAboutPage=function(){d(r)},t.displayTalkVotePage=function(e,t){var n=encodeURIComponent(t);d(s+e+"/"+n)},t.displayTalkDetail=function(e,t){var n=encodeURIComponent(t);d(u+e+"/"+n)},t.displayStatistiquePage=function(){d(c)}};return new f}),define("libs/userVoice",[],function(){return UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/5nSEVeJdJTmitsQOvMs8Yg.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),UserVoice.push(["set",{accent_color:"#448dd6",trigger_color:"white",trigger_background_color:"#448dd6"}]),UserVoice.push(["identify",{}]),UserVoice.push(["addTrigger",{mode:"smartvote",trigger_position:"bottom-right"}]),UserVoice.push(["autoprompt",{}]),UserVoice}),define("libs/googleAnalytics",[],function(){return function(e,t,n,i,o,a,r){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,a=t.createElement(n),r=t.getElementsByTagName(n)[0],a.async=1,a.src=i,r.parentNode.insertBefore(a,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-50437771-1","mixit.fr"),window.ga("send","pageview"),{}}),define("main",["viewModels/main","knockout","libs/navigation","libs/userVoice","libs/googleAnalytics","bootstrap"],function(e,t,n){return function(){var i=e.create();n.initialize(function(e){i.changePage(e)}),t.applyBindings(i)}}),require.config({baseUrl:"",paths:{knockout:"//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min",socketIO:"//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min",sammy:"//cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.4/sammy.min",bootstrap:"http://ajax.aspnetcdn.com/ajax/bootstrap/3.1.1/bootstrap.min",chart:"http://cdn3.devexpress.com/jslib/13.2.9/js/dx.chartjs",globalize:"http://ajax.aspnetcdn.com/ajax/globalize/0.1.1/globalize.min"},shim:{sammy:{deps:["jquery"]},bootstrap:{deps:["jquery"]},chart:{deps:["jquery","globalize"]},globalize:{deps:["jquery"]}}}),require(["main"],function(e){e()}),define("application.build",["main"],function(){});