define("viewModels/main",["knockout"],function(t){var e=function(){var e=this;e.currentPage=t.observable(),e.changePage=function(t){var n=e.currentPage();e.currentPage(t),n&&n.dispose&&n.dispose()}};return{create:function(){return new e}}}),define("libs/api",["jquery"],function(t){return{currentTalks:function(){return t.get("/api/talks/current")},nextTalks:function(){return t.get("/api/talks/next")},getTalk:function(e){return t.get("/api/talks/"+e)},applicationVersion:function(){return t.get("/api/applicationVersion")},getStatistiques:function(){return t.get("/api/stats")}}}),define("viewModels/home",["knockout","libs/api"],function(t,e){var n=function(t,e,n){var i=this;i.id=t,i.title=e,i.select=function(){n.displayTalkVotePage(t,e)},i.viewDetails=function(){n.displayTalkDetail(t,e)}},i=function(i){var o=this;o.templateName="homeTemplate",o.talks=t.observableArray(),o.nextTalks=t.observableArray(),o.waiting=t.observable(!0),o.isThereNextTalks=t.computed(function(){return o.nextTalks().length>0}),e.currentTalks().done(function(e){var a=t.utils.arrayMap(e,function(t){return new n(t.id,t.title,i)});o.talks(a),o.waiting(!1)}),e.nextTalks().done(function(e){var a=t.utils.arrayMap(e,function(t){return new n(t.id,t.title,i)});o.nextTalks(a)}),o.displayStatistique=function(){i.displayStatistiquePage()},window.twttr&&window.setTimeout(function(){window.twttr.widgets.load()},0)};return{create:function(t){return new i(t)}}}),define("viewModels/about",["libs/api","knockout"],function(t,e){var n=function(){var n=this;n.templateName="aboutTemplate",n.applicationVersion=e.observable("non déterminée"),t.applicationVersion().done(function(t){n.applicationVersion(t.applicationVersion)})};return{create:function(){return new n}}}),define("libs/timer",[],function(){var t=function(t,e){var n,i=this;i.start=function(){void 0===n&&(n=setInterval(e,t))},i.stop=function(){void 0!==n&&(clearInterval(n),n=void 0)},i.restart=function(){i.stop(),i.start()}};return{create:function(e,n){return new t(e,n)}}}),define("libs/socketIO",["socketIO","jquery","libs/timer"],function(t,e,n){var i,o=50,a=function(){return void 0===i?!1:i.socket.open},r=function(){var t=new e.Deferred,i=0,r=function(){return a()?(s.stop(),void t.resolve(!0)):i>o?(s.stop(),void t.reject("Impossible to connect")):void i++},s=n.create(100,r);return s.start(),t.promise()};return{connect:function(){return a()?void 0:(i?i.socket.connect():i=t.connect(),r())},disconnect:function(){a()&&i.disconnect()},send:function(t,e){if(!a())throw"Impossible to connect at server";i.emit(t,e)},on:function(t,e){i.on(t,e)},isConnected:function(){return a()},dispose:function(){i=void 0}}}),define("libs/voteSender",["libs/timer","libs/socketIO"],function(t,e){var n,i=[],o=function(){return void 0===n&&(n=t.create(1e3,a)),n},a=function(){o().stop();var t=i;i=[];for(var n in t)e.send("vote",{talkId:n,votesNb:t[n]})};return{isEnabled:function(){return e.isConnected()},enable:function(){return e.connect()},disable:function(){e.disconnect(),o().stop(),i=[]},send:function(t){void 0===i[t]?i[t]=1:i[t]++,o().start()},onTalkEnded:function(t){e.on("InvalidTalk",t)}}}),define("viewModels/talkVote",["knockout","libs/timer","libs/voteSender","libs/api"],function(t,e,n,i){var o=function(o,a){var r=this;r.templateName="talkVoteTemplate",r.talkId=o,r.talkTitle=a,r.hasError=t.observable(!1),r.connected=t.observable(!1),r.talkEnded=t.observable(!1),r.happyLevel=t.observable(0),r.talkRoom=t.observable(),i.getTalk(o).done(function(t){r.talkRoom(t.room)});var s=0,c=function(){r.happyLevel(s>8?5:s>6?4:s>4?3:s>1?2:1==s?1:0),s=Math.floor(s/2)},u=e.create(500,c);r.vote=function(){return n.isEnabled()?(0>=s&&(u.restart(),r.happyLevel(1)),s++,void n.send(o)):void r.hasError(!0)},n.enable().done(function(){r.connected(!0)}).fail(function(){r.hasError(!0)}),n.onTalkEnded(function(){r.talkEnded(!0)}),r.dispose=function(){u.stop(),n.disable()},window.twttr&&window.setTimeout(function(){window.twttr.widgets.load()},0)};return{create:function(t,e){return new o(t,e)}}}),define("libs/chartBinding",["knockout","jquery","highcharts"],function(t){t.bindingHandlers.chartMixIt={update:function(e,n){var i=n(),o=t.unwrap(i);$(e).highcharts(o)}}}),define("viewModels/statistique",["knockout","libs/api","libs/chartBinding"],function(t,e){var n=function(){var n=this;n.templateName="statistiqueTemplate";var i={chart:{type:"area"},title:{text:"Votes"},xAxis:{tickInterval:6,categories:[],labels:{formatter:function(){return"Le "+this.value.getDate()+" à "+this.value.getHours()+"h"}}},yAxis:{max:300,title:"Nb. votes"},tooltip:{formatter:function(){var t=this.x,e='<span style="font-size: 10px">Le '+t.getDate()+" à "+t.getHours()+"H"+t.getMinutes()+"</span><br/>";return this.points.forEach(function(t){var n=t.y;if(n>0){var i=t.series;e+='<span style="color:'+i.color+'">●</span> '+i.name+": <b>"+n+"</b><br/>"}}),e},shared:!0},plotOptions:{area:{stacking:"normal",marker:{enabled:!1}}},series:[]};n.chartOptions=t.observable(),e.getStatistiques().done(function(t){t.series.forEach(function(t){i.series.push({id:t.id,name:t.name,data:[]})}),t.dataSource.forEach(function(t){var e=new Date(t.date);i.xAxis.categories.push(e),i.series.forEach(function(e){e.data.push(t[e.id])})}),i.series=i.series.filter(function(t){return t.data.some(function(t){return t>0})}),n.chartOptions(i)})};return{create:function(){return new n}}}),define("libs/navigation",["sammy","viewModels/home","viewModels/about","viewModels/talkVote","viewModels/statistique"],function(t,e,n,i,o){var a="#/",r="#/about",s="#/talkVote/",c="#/statistique/",u="#/talkDetail/",l=function(l,d){return t(function(){this.get(a,function(){l(e.create(d))}),this.get(r,function(){l(n.create())}),this.get(s+":talkId/:talkTitle",function(){var t=this.params;l(i.create(t.talkId,t.talkTitle))}),this.get(u+":talkId/:talkTitle",function(){var t=this.params;l(talkDetailViewModel.create(t.talkId,t.talkTitle))}),this.get(c,function(){this.params;l(o.create())})})},d=function(t){window.location.hash=t},f=function(){var t,e=this;e.initialize=function(n){void 0!==t&&t.unload(),t=l(n,e),t.run(a)},e.displayHomePage=function(){d(a)},e.displayAboutPage=function(){d(r)},e.displayTalkVotePage=function(t,e){var n=encodeURIComponent(e);d(s+t+"/"+n)},e.displayTalkDetail=function(t,e){var n=encodeURIComponent(e);d(u+t+"/"+n)},e.displayStatistiquePage=function(){d(c)}};return new f}),define("libs/userVoice",[],function(){return UserVoice=window.UserVoice||[],function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//widget.uservoice.com/5nSEVeJdJTmitsQOvMs8Yg.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),UserVoice.push(["set",{accent_color:"#448dd6",trigger_color:"white",trigger_background_color:"#448dd6"}]),UserVoice.push(["identify",{}]),UserVoice.push(["addTrigger",{mode:"smartvote",trigger_position:"bottom-right"}]),UserVoice.push(["autoprompt",{}]),UserVoice}),define("libs/googleAnalytics",[],function(){return function(t,e,n,i,o,a,r){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,a=e.createElement(n),r=e.getElementsByTagName(n)[0],a.async=1,a.src=i,r.parentNode.insertBefore(a,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-50437771-1","mixit.fr"),window.ga("send","pageview"),{}}),define("main",["viewModels/main","knockout","libs/navigation","libs/userVoice","libs/googleAnalytics","bootstrap","twitter"],function(t,e,n){return function(){var i=t.create();n.initialize(function(t){i.changePage(t)}),e.applyBindings(i)}}),require.config({baseUrl:"",paths:{knockout:"//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min",socketIO:"//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min",sammy:"//cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.4/sammy.min",bootstrap:"http://ajax.aspnetcdn.com/ajax/bootstrap/3.1.1/bootstrap.min",twitter:"//platform.twitter.com/widgets",highcharts:"//cdnjs.cloudflare.com/ajax/libs/highcharts/4.0.1/highcharts"},shim:{sammy:{deps:["jquery"]},bootstrap:{deps:["jquery"]},chart:{deps:["jquery","globalize"]},globalize:{deps:["jquery"]}}}),require(["main"],function(t){t()}),define("application.build",["main"],function(){});