define("viewModels/main",["knockout"],function(e){var n=function(){var n=this;n.currentPage=e.observable(),n.changePage=function(e){var t=n.currentPage();n.currentPage(e),t&&t.dispose&&t.dispose()}};return{create:function(){return new n}}}),define("libs/api",[],function(){var e=function(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&n(JSON.parse(t.responseText))},t.open("GET",e,!0),t.send()},n=function(n){return{done:function(t){e(n,t)}}};return{currentTalks:function(){return n("/api/talks/current")},nextTalks:function(){return n("/api/talks/next")},getTalk:function(e){return n("/api/talks/"+e)},applicationVersion:function(){return n("/api/applicationVersion")}}}),define("viewModels/home",["knockout","libs/api"],function(e,n){var t=function(e,n,t){var i=this;i.id=e,i.title=n,i.select=function(){t.displayTalkVotePage(e,n)},i.viewDetails=function(){t.displayTalkDetail(e,n)}},i=function(i){var o=this;o.templateName="homeTemplate",o.talks=e.observableArray(),o.nextTalks=e.observableArray(),o.waiting=e.observable(!0),o.isThereNextTalks=e.computed(function(){return o.nextTalks().length>0}),n.currentTalks().done(function(n){var a=e.utils.arrayMap(n,function(e){return new t(e.id,e.title,i)});o.talks(a),o.waiting(!1)}),n.nextTalks().done(function(n){var a=e.utils.arrayMap(n,function(e){return new t(e.id,e.title,i)});o.nextTalks(a)})};return{create:function(e){return new i(e)}}}),define("viewModels/about",["libs/api","knockout"],function(e,n){var t=function(){var t=this;t.templateName="aboutTemplate",t.applicationVersion=n.observable("non déterminée"),e.applicationVersion().done(function(e){t.applicationVersion(e.applicationVersion)})};return{create:function(){return new t}}}),define("libs/timer",[],function(){var e=function(e,n){var t,i=this;i.start=function(){void 0===t&&(t=setInterval(n,e))},i.stop=function(){void 0!==t&&(clearInterval(t),t=void 0)},i.restart=function(){i.stop(),i.start()}};return{create:function(n,t){return new e(n,t)}}}),define("libs/socketIO",["socketIO","libs/timer"],function(e,n){var t,i=50,o=function(){return void 0===t?!1:t.socket.open},a=function(){var e=[],t=[],a=!1,r=!1,c=!1,s=function(){r=!0,c=!0,e.forEach(function(e){e()})},u=function(){a=!0,c=!0,t.forEach(function(e){e()})},l=0,d=function(){return o()?(f.stop(),void s(!0)):l>i?(f.stop(),void u("Impossible to connect")):void l++},f=n.create(100,d);return f.start(),new function(){this.done=function(n){return c?r&&n():e.push(n),this},this.fail=function(e){return c?a&&e():t.push(e),this}}};return{connect:function(){return o()?void 0:(t?t.socket.connect():t=e.connect(),a())},disconnect:function(){o()&&t.disconnect()},send:function(e,n){if(!o())throw"Impossible to connect at server";t.emit(e,n)},on:function(e,n){t.on(e,n)},isConnected:function(){return o()},dispose:function(){t=void 0}}}),define("libs/voteSender",["libs/timer","libs/socketIO"],function(e,n){var t,i=[],o=function(){return void 0===t&&(t=e.create(1e3,a)),t},a=function(){o().stop();var e=i;i=[];for(var t in e)n.send("vote",{talkId:t,votesNb:e[t]})};return{isEnabled:function(){return n.isConnected()},enable:function(){return n.connect()},disable:function(){n.disconnect(),o().stop(),i=[]},send:function(e){void 0===i[e]?i[e]=1:i[e]++,o().start()},onTalkEnded:function(e){n.on("InvalidTalk",e)}}}),define("viewModels/talkVote",["knockout","libs/timer","libs/voteSender","libs/api"],function(e,n,t,i){var o=function(o,a){var r=this;r.templateName="talkVoteTemplate",r.talkId=o,r.talkTitle=a,r.hasError=e.observable(!1),r.connected=e.observable(!1),r.talkEnded=e.observable(!1),r.happyLevel=e.observable(0),r.talkRoom=e.observable(),i.getTalk(o).done(function(e){r.talkRoom(e.room)});var c=0,s=function(){r.happyLevel(c>8?5:c>6?4:c>4?3:c>1?2:1==c?1:0),c=Math.floor(c/2)},u=n.create(500,s);r.vote=function(){return t.isEnabled()?(0>=c&&(u.restart(),r.happyLevel(1)),c++,void t.send(o)):void r.hasError(!0)},t.enable().done(function(){r.connected(!0)}).fail(function(){r.hasError(!0)}),t.onTalkEnded(function(){r.talkEnded(!0)}),r.dispose=function(){u.stop(),t.disable()},window.twttr&&window.setTimeout(function(){window.twttr.widgets.load()},0)};return{create:function(e,n){return new o(e,n)}}}),define("libs/navigation",["sammy","viewModels/home","viewModels/about","viewModels/talkVote"],function(e,n,t,i){var o="#/",a="#/about",r="#/talkVote/",c="#/talkDetail/",s=function(s,u){return e(function(){this.get(o,function(){s(n.create(u))}),this.get(a,function(){s(t.create())}),this.get(r+":talkId/:talkTitle",function(){var e=this.params;s(i.create(e.talkId,e.talkTitle))}),this.get(c+":talkId/:talkTitle",function(){var e=this.params;s(talkDetailViewModel.create(e.talkId,e.talkTitle))})})},u=function(e){window.location.hash=e},l=function(){var e,n=this;n.initialize=function(t){void 0!==e&&e.unload(),e=s(t,n),e.run(o)},n.displayHomePage=function(){u(o)},n.displayAboutPage=function(){u(a)},n.displayTalkVotePage=function(e,n){var t=encodeURIComponent(n);u(r+e+"/"+t)},n.displayTalkDetail=function(e,n){var t=encodeURIComponent(n);u(c+e+"/"+t)}};return new l}),define("libs/userVoice",[],function(){return UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/5nSEVeJdJTmitsQOvMs8Yg.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),UserVoice.push(["set",{accent_color:"#448dd6",trigger_color:"white",trigger_background_color:"#448dd6"}]),UserVoice.push(["identify",{}]),UserVoice.push(["addTrigger",{mode:"smartvote",trigger_position:"bottom-right"}]),UserVoice.push(["autoprompt",{}]),UserVoice}),define("libs/googleAnalytics",[],function(){return function(e,n,t,i,o,a,r){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,a=n.createElement(t),r=n.getElementsByTagName(t)[0],a.async=1,a.src=i,r.parentNode.insertBefore(a,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-50437771-1","mixit.fr"),window.ga("send","pageview"),{}}),define("main",["viewModels/main","knockout","libs/navigation","libs/userVoice","libs/googleAnalytics"],function(e,n,t){return function(){var i=e.create();t.initialize(function(e){i.changePage(e)}),n.applyBindings(i)}}),require.config({baseUrl:"",paths:{knockout:"//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min",socketIO:"//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min",sammy:"//cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.4/sammy.min"},shim:{sammy:{deps:["jquery"]}}}),require(["main"],function(e){e()}),define("application.build",["main"],function(){});