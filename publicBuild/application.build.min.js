define("viewModels/main",["knockout"],function(e){var t=function(){var t=this;t.currentPage=e.observable(),t.changePage=function(e){var n=t.currentPage();t.currentPage(e),n&&n.dispose&&n.dispose()}};return{create:function(){return new t}}}),define("libs/api",["jquery"],function(e){return{currentTalks:function(){return e.get("/api/talks/current")},nextTalks:function(){return e.get("/api/talks/next")},getTalk:function(t){return e.get("/api/talks/"+t)},applicationVersion:function(){return e.get("/api/applicationVersion")}}}),define("viewModels/home",["knockout","libs/api"],function(e,t){var n=function(e,t,n){var o=this;o.id=e,o.title=t,o.select=function(){n.displayTalkVotePage(e,t)},o.viewDetails=function(){n.displayTalkDetail(e,t)}},o=function(o){var i=this;i.templateName="homeTemplate",i.talks=e.observableArray(),i.nextTalks=e.observableArray(),i.waiting=e.observable(!0),t.currentTalks().done(function(t){var a=e.utils.arrayMap(t,function(e){return new n(e.id,e.title,o)});i.talks(a),i.waiting(!1)}),t.nextTalks().done(function(t){var a=e.utils.arrayMap(t,function(e){return new n(e.id,e.title,o)});i.nextTalks(a)})};return{create:function(e){return new o(e)}}}),define("viewModels/about",["libs/api","knockout"],function(e,t){var n=function(){var n=this;n.templateName="aboutTemplate",n.applicationVersion=t.observable("non déterminée"),e.applicationVersion().done(function(e){n.applicationVersion(e.applicationVersion)})};return{create:function(){return new n}}}),define("libs/timer",[],function(){var e=function(e,t){var n,o=this;o.start=function(){void 0===n&&(n=setInterval(t,e))},o.stop=function(){void 0!==n&&(clearInterval(n),n=void 0)},o.restart=function(){o.stop(),o.start()}};return{create:function(t,n){return new e(t,n)}}}),define("libs/socketIO",["socketIO","jquery","libs/timer"],function(e,t,n){var o,i=50,a=function(){return void 0===o?!1:o.socket.open},r=function(){var e=new t.Deferred,o=0,r=function(){return a()?(s.stop(),void e.resolve(!0)):o>i?(s.stop(),void e.reject("Impossible to connect")):void o++},s=n.create(100,r);return s.start(),e.promise()};return{connect:function(){return a()?void 0:(o?o.socket.connect():o=e.connect(),r())},disconnect:function(){a()&&o.disconnect()},send:function(e,t){if(!a())throw"Impossible to connect at server";o.emit(e,t)},on:function(e,t){o.on(e,t)},isConnected:function(){return a()},dispose:function(){o=void 0}}}),define("libs/voteSender",["libs/timer","libs/socketIO"],function(e,t){var n,o=[],i=function(){return void 0===n&&(n=e.create(1e3,a)),n},a=function(){i().stop();var e=o;o=[];for(var n in e)t.send("vote",{talkId:n,votesNb:e[n]})};return{isEnabled:function(){return t.isConnected()},enable:function(){return t.connect()},disable:function(){t.disconnect(),i().stop(),o=[]},send:function(e){void 0===o[e]?o[e]=1:o[e]++,i().start()},onTalkEnded:function(e){t.on("InvalidTalk",e)}}}),define("viewModels/talkVote",["knockout","libs/timer","libs/voteSender"],function(e,t,n){var o=function(o,i){var a=this;a.templateName="talkVoteTemplate",a.talkId=o,a.talkTitle=i,a.hasError=e.observable(!1),a.connected=e.observable(!1),a.talkEnded=e.observable(!1),a.happyLevel=e.observable(0);var r=0,s=function(){a.happyLevel(r>8?5:r>6?4:r>4?3:r>1?2:1==r?1:0),r=Math.floor(r/2)},c=t.create(500,s);a.vote=function(){return n.isEnabled()?(0>=r&&(c.restart(),a.happyLevel(1)),r++,void n.send(o)):void a.hasError(!0)},n.enable().done(function(){a.connected(!0)}).fail(function(){a.hasError(!0)}),n.onTalkEnded(function(){a.talkEnded(!0)}),a.dispose=function(){c.stop(),n.disable()}};return{create:function(e,t){return new o(e,t)}}}),define("viewModels/talkDetail",["knockout","libs/api"],function(e,t){function n(e,t){return t-=e.toString().length,t>0?new Array(t+(/\./.test(e)?2:1)).join("0")+e:e+""}var o=function(o,i){var a=this;a.templateName="talkDetailTemplate",a.talkId=o,a.talkTitle=i,a.loading=e.observable(!0),a.talkSummary=e.observable(),a.talkDay=e.observable(),a.talkStart=e.observable(),a.talkEnd=e.observable(),a.talkRoom=e.observable(),a.talkSpeakers=e.observableArray(),a.talkHasStartAndEnd=e.observable(!0),t.getTalk(o).done(function(e){if(a.loading(!1),a.talkSummary(e.summary),void 0===e.start||void 0===e.end)a.talkHasStartAndEnd(!1);else{var t=new Date(e.start);a.talkDay(t.getDate()+"/"+(t.getMonth()+1)),a.talkStart(t.getHours()+":"+n(t.getMinutes(),2));var o=new Date(e.end);a.talkEnd(o.getHours()+":"+o.getMinutes())}a.talkRoom(e.room),a.talkSpeakers(e.speakers)})};return{create:function(e,t){return new o(e,t)}}}),define("libs/navigation",["sammy","viewModels/home","viewModels/about","viewModels/talkVote","viewModels/talkDetail"],function(e,t,n,o,i){var a="#/",r="#/about",s="#/talkVote/",c="#/talkDetail/",l=function(l,u){return e(function(){this.get(a,function(){l(t.create(u))}),this.get(r,function(){l(n.create())}),this.get(s+":talkId/:talkTitle",function(){var e=this.params;l(o.create(e.talkId,e.talkTitle))}),this.get(c+":talkId/:talkTitle",function(){var e=this.params;l(i.create(e.talkId,e.talkTitle))})})},u=function(e){window.location.hash=e},d=function(){var e,t=this;t.initialize=function(n){void 0!==e&&e.unload(),e=l(n,t),e.run(a)},t.displayHomePage=function(){u(a)},t.displayAboutPage=function(){u(r)},t.displayTalkVotePage=function(e,t){var n=encodeURIComponent(t);u(s+e+"/"+n)},t.displayTalkDetail=function(e,t){var n=encodeURIComponent(t);u(c+e+"/"+n)}};return new d}),define("libs/userVoice",[],function(){return UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/5nSEVeJdJTmitsQOvMs8Yg.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),UserVoice.push(["set",{accent_color:"#448dd6",trigger_color:"white",trigger_background_color:"#448dd6"}]),UserVoice.push(["identify",{}]),UserVoice.push(["addTrigger",{mode:"smartvote",trigger_position:"bottom-right"}]),UserVoice.push(["autoprompt",{}]),UserVoice}),define("libs/googleAnalytics",[],function(){return function(e,t,n,o,i,a,r){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(n),r=t.getElementsByTagName(n)[0],a.async=1,a.src=o,r.parentNode.insertBefore(a,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-50437771-1","mixit.fr"),window.ga("send","pageview"),{}}),define("main",["viewModels/main","knockout","libs/navigation","libs/userVoice","libs/googleAnalytics","bootstrap"],function(e,t,n){return function(){var o=e.create();n.initialize(function(e){o.changePage(e)}),t.applyBindings(o)}}),require.config({baseUrl:"",paths:{knockout:"//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min",socketIO:"//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min",sammy:"//cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.4/sammy.min",bootstrap:"http://ajax.aspnetcdn.com/ajax/bootstrap/3.1.1/bootstrap.min"},shim:{sammy:{deps:["jquery"]},bootstrap:{deps:["jquery"]}}}),require(["main"],function(e){e()}),define("application.build",["main"],function(){});